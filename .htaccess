<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# ==================== REDIRECT www → non-www ====================
RewriteCond %{HTTP_HOST} ^www\.viralcatmeow\.com$ [NC]
RewriteRule ^(.*)$ https://viralcatmeow.com/$1 [R=301,L]

# ==================== REDIRECT index.html → / ====================
RewriteCond %{THE_REQUEST} \s/+index\.html[\s?]
RewriteRule ^index\.html$ / [R=301,L]

# ==================== EXPLICITLY REDIRECT blogs.html AND blog-detail.html ====================
RewriteCond %{THE_REQUEST} \s/+blogs\.html[\s?]
RewriteRule ^blogs\.html$ /blogs [R=301,L]

RewriteCond %{THE_REQUEST} \s/+blog-detail\.html[\s?]
RewriteRule ^blog-detail\.html$ /blog-detail [R=301,L]

# ==================== REDIRECT .html → clean URLs ====================
RewriteCond %{THE_REQUEST} \s/+(.+?)\.html[\s?]
RewriteCond %{REQUEST_URI} !^/blog/ [NC]
RewriteRule ^(.+?)\.html$ /$1 [R=301,L]

# ==================== BLOG CLEAN URLS ====================
# /blogs → /blogs.html (internal rewrite)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^blogs/?$ /blogs.html [L,NC]

# /blog-detail/slug → /blog-detail.html?slug=slug (internal rewrite)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^blog-detail/([^/]+)/?$ /blog-detail.html?slug=$1 [L,QSA,NC]

# ==================== WORDPRESS /blog DIRECTORY ====================
RewriteRule ^blog/index\.php$ - [L]

# If /blog/slug matches a root-level HTML file, redirect to clean URL
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^blog/([^/]+)/?$ /$1 [R=301,L]

# WordPress fallback
RewriteCond %{REQUEST_URI} ^/blog/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^blog/ /blog/index.php [L]

# ==================== GENERAL CLEAN URL SERVING ====================
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteCond %{REQUEST_URI} !^/blogs [NC]
RewriteCond %{REQUEST_URI} !^/blog-detail [NC]
RewriteCond %{REQUEST_URI} !^/blog/ [NC]
RewriteRule ^([^/]+)/?$ $1.html [L]

# ==================== CAREERS ====================
RewriteRule ^careers/?$ /career.html [L]

</IfModule>